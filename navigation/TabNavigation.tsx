import "react-native-gesture-handler";
import React, { useEffect, useState } from "react";
import { createBottomTabNavigator } from "@react-navigation/bottom-tabs";
import { NavigationContainer } from "@react-navigation/native";
import HomeScreen from "../screens/HomeScreen/HomeScreen";
import NewDeviceScreen from "../screens/NewDeviceScreen";
import SettingsScreen from "../screens/SettingsScreen";
import ProfileScreen from "../screens/ProfileScreen";
import { Fonts } from "../constants/fonts";
import { Colors } from "../constants/colors";
import {
  createNativeStackNavigator,
  NativeStackScreenProps,
} from "@react-navigation/native-stack";
import { SVG } from "../components/SVGs/SVGs";

const Tabs = createBottomTabNavigator();

type RootStackParamList = {
  Home: undefined;
  NewDevice: undefined;
  Settings: undefined;
  Profile: undefined;
};

type Props = NativeStackScreenProps<RootStackParamList, "Home">;

export const TabNavigator = () => {
  return (
    <Tabs.Navigator
      initialRouteName="Home"
      screenOptions={({ route }) => ({
        tabBarIcon: ({ focused }) => {
          let icon;
          if (route.name === "Home") {
            icon = focused ? (
              <SVG
                svg={`<svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 15.9997V10.9997H12V15.9997C12 16.5497 12.45 16.9997 13 16.9997H16C16.55 16.9997 17 16.5497 17 15.9997V8.99973H18.7C19.16 8.99973 19.38 8.42973 19.03 8.12973L10.67 0.599727C10.29 0.259727 9.71 0.259727 9.33 0.599727L0.969999 8.12973C0.629999 8.42973 0.839999 8.99973 1.3 8.99973H3V15.9997C3 16.5497 3.45 16.9997 4 16.9997H7C7.55 16.9997 8 16.5497 8 15.9997Z" fill="#164C83"/>
        </svg>`}
                width={"18.4px"}
                height={"16.66px"}
              />
            ) : (
              <SVG
                svg={`<svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 15.9997V10.9997H12V15.9997C12 16.5497 12.45 16.9997 13 16.9997H16C16.55 16.9997 17 16.5497 17 15.9997V8.99973H18.7C19.16 8.99973 19.38 8.42973 19.03 8.12973L10.67 0.599727C10.29 0.259727 9.71 0.259727 9.33 0.599727L0.969999 8.12973C0.629999 8.42973 0.839999 8.99973 1.3 8.99973H3V15.9997C3 16.5497 3.45 16.9997 4 16.9997H7C7.55 16.9997 8 16.5497 8 15.9997Z" fill="#164C83"/>
        </svg>`}
                width={"18.4px"}
                height={"16.66px"}
              />
            );
          } else if (route.name === "NewDevice") {
            icon = focused ? (
              <SVG
                svg={`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 14C6.71667 14 6.47933 13.904 6.288 13.712C6.096 13.5207 6 13.2833 6 13V8H1C0.716667 8 0.479 7.904 0.287 7.712C0.0956668 7.52067 0 7.28333 0 7C0 6.71667 0.0956668 6.479 0.287 6.287C0.479 6.09567 0.716667 6 1 6H6V1C6 0.716667 6.096 0.479 6.288 0.287C6.47933 0.0956668 6.71667 0 7 0C7.28333 0 7.521 0.0956668 7.713 0.287C7.90433 0.479 8 0.716667 8 1V6H13C13.2833 6 13.5207 6.09567 13.712 6.287C13.904 6.479 14 6.71667 14 7C14 7.28333 13.904 7.52067 13.712 7.712C13.5207 7.904 13.2833 8 13 8H8V13C8 13.2833 7.90433 13.5207 7.713 13.712C7.521 13.904 7.28333 14 7 14Z" fill="#8A8A8A"/>
        </svg>`}
                width={"14px"}
                height={"14px"}
              />
            ) : (
              <SVG
                svg={`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 14C6.71667 14 6.47933 13.904 6.288 13.712C6.096 13.5207 6 13.2833 6 13V8H1C0.716667 8 0.479 7.904 0.287 7.712C0.0956668 7.52067 0 7.28333 0 7C0 6.71667 0.0956668 6.479 0.287 6.287C0.479 6.09567 0.716667 6 1 6H6V1C6 0.716667 6.096 0.479 6.288 0.287C6.47933 0.0956668 6.71667 0 7 0C7.28333 0 7.521 0.0956668 7.713 0.287C7.90433 0.479 8 0.716667 8 1V6H13C13.2833 6 13.5207 6.09567 13.712 6.287C13.904 6.479 14 6.71667 14 7C14 7.28333 13.904 7.52067 13.712 7.712C13.5207 7.904 13.2833 8 13 8H8V13C8 13.2833 7.90433 13.5207 7.713 13.712C7.521 13.904 7.28333 14 7 14Z" fill="#8A8A8A"/>
        </svg>`}
                width={"14px"}
                height={"14px"}
              />
            );
          } else if (route.name === "Settings") {
            icon = focused ? (
              <SVG
                svg={`<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.375 20H8.625C8.375 20 8.15834 19.9167 7.975 19.75C7.79167 19.5833 7.68333 19.375 7.65 19.125L7.35 16.8C7.13334 16.7167 6.92933 16.6167 6.738 16.5C6.546 16.3833 6.35834 16.2583 6.175 16.125L4 17.025C3.76667 17.1083 3.53334 17.1167 3.3 17.05C3.06667 16.9833 2.88333 16.8417 2.75 16.625L0.900002 13.4C0.766668 13.1833 0.725002 12.95 0.775002 12.7C0.825002 12.45 0.950002 12.25 1.15 12.1L3.025 10.675C3.00834 10.5583 3 10.4457 3 10.337V9.662C3 9.554 3.00834 9.44167 3.025 9.325L1.15 7.9C0.950002 7.75 0.825002 7.55 0.775002 7.3C0.725002 7.05 0.766668 6.81667 0.900002 6.6L2.75 3.375C2.86667 3.14167 3.04567 2.99567 3.287 2.937C3.529 2.879 3.76667 2.89167 4 2.975L6.175 3.875C6.35834 3.74167 6.55 3.61667 6.75 3.5C6.95 3.38333 7.15 3.28333 7.35 3.2L7.65 0.875C7.68333 0.625 7.79167 0.416667 7.975 0.25C8.15834 0.0833333 8.375 0 8.625 0H12.375C12.625 0 12.8417 0.0833333 13.025 0.25C13.2083 0.416667 13.3167 0.625 13.35 0.875L13.65 3.2C13.8667 3.28333 14.071 3.38333 14.263 3.5C14.4543 3.61667 14.6417 3.74167 14.825 3.875L17 2.975C17.2333 2.89167 17.4667 2.88333 17.7 2.95C17.9333 3.01667 18.1167 3.15833 18.25 3.375L20.1 6.6C20.2333 6.81667 20.275 7.05 20.225 7.3C20.175 7.55 20.05 7.75 19.85 7.9L17.975 9.325C17.9917 9.44167 18 9.554 18 9.662V10.337C18 10.4457 17.9833 10.5583 17.95 10.675L19.825 12.1C20.025 12.25 20.15 12.45 20.2 12.7C20.25 12.95 20.2083 13.1833 20.075 13.4L18.225 16.6C18.0917 16.8167 17.9043 16.9627 17.663 17.038C17.421 17.1127 17.1833 17.1083 16.95 17.025L14.825 16.125C14.6417 16.2583 14.45 16.3833 14.25 16.5C14.05 16.6167 13.85 16.7167 13.65 16.8L13.35 19.125C13.3167 19.375 13.2083 19.5833 13.025 19.75C12.8417 19.9167 12.625 20 12.375 20ZM10.55 13.5C11.5167 13.5 12.3417 13.1583 13.025 12.475C13.7083 11.7917 14.05 10.9667 14.05 10C14.05 9.03333 13.7083 8.20833 13.025 7.525C12.3417 6.84167 11.5167 6.5 10.55 6.5C9.56667 6.5 8.73734 6.84167 8.062 7.525C7.38733 8.20833 7.05 9.03333 7.05 10C7.05 10.9667 7.38733 11.7917 8.062 12.475C8.73734 13.1583 9.56667 13.5 10.55 13.5Z" fill="#8A8A8A"/>
        </svg>`}
                width={"19.49px"}
                height={"20px"}
              />
            ) : (
              <SVG
                svg={`<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.375 20H8.625C8.375 20 8.15834 19.9167 7.975 19.75C7.79167 19.5833 7.68333 19.375 7.65 19.125L7.35 16.8C7.13334 16.7167 6.92933 16.6167 6.738 16.5C6.546 16.3833 6.35834 16.2583 6.175 16.125L4 17.025C3.76667 17.1083 3.53334 17.1167 3.3 17.05C3.06667 16.9833 2.88333 16.8417 2.75 16.625L0.900002 13.4C0.766668 13.1833 0.725002 12.95 0.775002 12.7C0.825002 12.45 0.950002 12.25 1.15 12.1L3.025 10.675C3.00834 10.5583 3 10.4457 3 10.337V9.662C3 9.554 3.00834 9.44167 3.025 9.325L1.15 7.9C0.950002 7.75 0.825002 7.55 0.775002 7.3C0.725002 7.05 0.766668 6.81667 0.900002 6.6L2.75 3.375C2.86667 3.14167 3.04567 2.99567 3.287 2.937C3.529 2.879 3.76667 2.89167 4 2.975L6.175 3.875C6.35834 3.74167 6.55 3.61667 6.75 3.5C6.95 3.38333 7.15 3.28333 7.35 3.2L7.65 0.875C7.68333 0.625 7.79167 0.416667 7.975 0.25C8.15834 0.0833333 8.375 0 8.625 0H12.375C12.625 0 12.8417 0.0833333 13.025 0.25C13.2083 0.416667 13.3167 0.625 13.35 0.875L13.65 3.2C13.8667 3.28333 14.071 3.38333 14.263 3.5C14.4543 3.61667 14.6417 3.74167 14.825 3.875L17 2.975C17.2333 2.89167 17.4667 2.88333 17.7 2.95C17.9333 3.01667 18.1167 3.15833 18.25 3.375L20.1 6.6C20.2333 6.81667 20.275 7.05 20.225 7.3C20.175 7.55 20.05 7.75 19.85 7.9L17.975 9.325C17.9917 9.44167 18 9.554 18 9.662V10.337C18 10.4457 17.9833 10.5583 17.95 10.675L19.825 12.1C20.025 12.25 20.15 12.45 20.2 12.7C20.25 12.95 20.2083 13.1833 20.075 13.4L18.225 16.6C18.0917 16.8167 17.9043 16.9627 17.663 17.038C17.421 17.1127 17.1833 17.1083 16.95 17.025L14.825 16.125C14.6417 16.2583 14.45 16.3833 14.25 16.5C14.05 16.6167 13.85 16.7167 13.65 16.8L13.35 19.125C13.3167 19.375 13.2083 19.5833 13.025 19.75C12.8417 19.9167 12.625 20 12.375 20ZM10.55 13.5C11.5167 13.5 12.3417 13.1583 13.025 12.475C13.7083 11.7917 14.05 10.9667 14.05 10C14.05 9.03333 13.7083 8.20833 13.025 7.525C12.3417 6.84167 11.5167 6.5 10.55 6.5C9.56667 6.5 8.73734 6.84167 8.062 7.525C7.38733 8.20833 7.05 9.03333 7.05 10C7.05 10.9667 7.38733 11.7917 8.062 12.475C8.73734 13.1583 9.56667 13.5 10.55 13.5Z" fill="#8A8A8A"/>
        </svg>`}
                width={"19.49px"}
                height={"20px"}
              />
            );
          } else if (route.name === "Profile") {
            icon = focused ? (
              <SVG
                svg={`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 7.97461C6.9 7.97461 6 7.62461 5.3 6.92461C4.6 6.22461 4.25 5.32461 4.25 4.22461C4.25 3.12461 4.6 2.22461 5.3 1.52461C6 0.82461 6.9 0.474609 8 0.474609C9.1 0.474609 10 0.82461 10.7 1.52461C11.4 2.22461 11.75 3.12461 11.75 4.22461C11.75 5.32461 11.4 6.22461 10.7 6.92461C10 7.62461 9.1 7.97461 8 7.97461ZM0 15.9996V13.6496C0 13.0163 0.158333 12.4746 0.475 12.0246C0.791667 11.5746 1.2 11.2329 1.7 10.9996C2.81667 10.4996 3.8875 10.1246 4.9125 9.87461C5.9375 9.62461 6.96667 9.49961 8 9.49961C9.03333 9.49961 10.0583 9.62878 11.075 9.88711C12.0917 10.1454 13.1583 10.5163 14.275 10.9996C14.7917 11.2329 15.2083 11.5746 15.525 12.0246C15.8417 12.4746 16 13.0163 16 13.6496V15.9996H0Z" fill="#8A8A8A"/>
        </svg>`}
                width={"16px"}
                height={"15.52px"}
              />
            ) : (
              <SVG
                svg={`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 7.97461C6.9 7.97461 6 7.62461 5.3 6.92461C4.6 6.22461 4.25 5.32461 4.25 4.22461C4.25 3.12461 4.6 2.22461 5.3 1.52461C6 0.82461 6.9 0.474609 8 0.474609C9.1 0.474609 10 0.82461 10.7 1.52461C11.4 2.22461 11.75 3.12461 11.75 4.22461C11.75 5.32461 11.4 6.22461 10.7 6.92461C10 7.62461 9.1 7.97461 8 7.97461ZM0 15.9996V13.6496C0 13.0163 0.158333 12.4746 0.475 12.0246C0.791667 11.5746 1.2 11.2329 1.7 10.9996C2.81667 10.4996 3.8875 10.1246 4.9125 9.87461C5.9375 9.62461 6.96667 9.49961 8 9.49961C9.03333 9.49961 10.0583 9.62878 11.075 9.88711C12.0917 10.1454 13.1583 10.5163 14.275 10.9996C14.7917 11.2329 15.2083 11.5746 15.525 12.0246C15.8417 12.4746 16 13.0163 16 13.6496V15.9996H0Z" fill="#8A8A8A"/>
        </svg>`}
                width={"16px"}
                height={"15.52px"}
              />
            );
          }
          return icon;
        },
        headerShown: false,
        tabBarStyle: {
          height: 70,
          backgroundColor: "#FFFFFF",
          paddingBottom: 20,
          paddingTop: 10,
        },
        tabBarActiveTintColor: Colors.Primary,
        tabBarInactiveTintColor: "#8A8A8A",
        tabBarLabelStyle: {
          fontFamily: Fonts.Medium,
        },
      })}
    >
      <Tabs.Screen name="Home" component={HomeScreen} />
      <Tabs.Screen name="NewDevice" component={NewDeviceScreen} />
      <Tabs.Screen name="Settings" component={SettingsScreen} />
      <Tabs.Screen name="Profile" component={ProfileScreen} />
    </Tabs.Navigator>
  );
};
